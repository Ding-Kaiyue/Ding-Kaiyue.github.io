<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 8.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/placeholder.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Exo:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Fira+Code:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous" defer></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"ding-kaiyue.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.25.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"github","dark":"github-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":true,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":false,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.json","localsearch":{"enable":true,"top_n_per_article":3,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="æœ¬æ–‡å±•ç¤ºæˆ‘å¦‚ä½•ä»¥æ¸…æ´æ¶æ„æ€æƒ³é‡æ„æ§åˆ¶å™¨æ³¨å†Œæœºåˆ¶ï¼Œæ„å»ºä¸€ä¸ªæ¨¡å—åŒ–ã€å¯é…ç½®ã€å¯æ‰©å±•çš„æœºå™¨äººæ§åˆ¶ç³»ç»Ÿã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸‹ç¯‡ï¼‰ï¼šæ¸…æ´æ¶æ„çš„è®¾è®¡ä¸å®ç°">
<meta property="og:url" content="http://ding-kaiyue.github.io/2025/11/01/%E4%BB%8E%E7%A1%AC%E7%BC%96%E7%A0%81%E5%88%B0%E6%8F%92%E4%BB%B6%E5%8C%96%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89%EF%BC%9A%E6%B8%85%E6%B4%81%E6%9E%B6%E6%9E%84%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/index.html">
<meta property="og:site_name" content="Ding Kaiyue&#39;s Blog">
<meta property="og:description" content="æœ¬æ–‡å±•ç¤ºæˆ‘å¦‚ä½•ä»¥æ¸…æ´æ¶æ„æ€æƒ³é‡æ„æ§åˆ¶å™¨æ³¨å†Œæœºåˆ¶ï¼Œæ„å»ºä¸€ä¸ªæ¨¡å—åŒ–ã€å¯é…ç½®ã€å¯æ‰©å±•çš„æœºå™¨äººæ§åˆ¶ç³»ç»Ÿã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-11-01T10:33:00.000Z">
<meta property="article:modified_time" content="2025-11-03T00:56:48.325Z">
<meta property="article:author" content="Ding Kaiyue">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="ROS2">
<meta property="article:tag" content="å·¥å‚æ¨¡å¼">
<meta property="article:tag" content="æ¶æ„è®¾è®¡">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://ding-kaiyue.github.io/2025/11/01/%E4%BB%8E%E7%A1%AC%E7%BC%96%E7%A0%81%E5%88%B0%E6%8F%92%E4%BB%B6%E5%8C%96%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89%EF%BC%9A%E6%B8%85%E6%B4%81%E6%9E%B6%E6%9E%84%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://ding-kaiyue.github.io/2025/11/01/%E4%BB%8E%E7%A1%AC%E7%BC%96%E7%A0%81%E5%88%B0%E6%8F%92%E4%BB%B6%E5%8C%96%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89%EF%BC%9A%E6%B8%85%E6%B4%81%E6%9E%B6%E6%9E%84%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/","path":"2025/11/01/ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸‹ç¯‡ï¼‰ï¼šæ¸…æ´æ¶æ„çš„è®¾è®¡ä¸å®ç°/","title":"ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸‹ç¯‡ï¼‰ï¼šæ¸…æ´æ¶æ„çš„è®¾è®¡ä¸å®ç°"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸‹ç¯‡ï¼‰ï¼šæ¸…æ´æ¶æ„çš„è®¾è®¡ä¸å®ç° | Ding Kaiyue's Blog</title>
  








  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/7.2.0/pangu.umd.js" integrity="sha256-JnmRRnJK7DC6RQJbAJb6AXOM9OmWzS6z8eYultk/48Y=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>





  <script src="/js/third-party/pace.js" defer></script>


  




<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><style>
#needsharebutton-postbottom {
  cursor: pointer;
  height: 26px;
  margin-top: 10px;
  position: relative;
}
#needsharebutton-postbottom .btn {
  border: 1px solid $btn-default-border-color;
  border-radius: 3px;
  display: initial;
  padding: 1px 4px;
}
</style><style>
#needsharebutton-float {
  bottom: 88px;
  cursor: pointer;
  left: -8px;
  position: fixed;
  z-index: 9999;
}
#needsharebutton-float .btn {
  border: 1px solid $btn-default-border-color;
  border-radius: 4px;
  padding: 0 10px 0 14px;
}
</style>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Ding Kaiyue's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Ding Kaiyue's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸è¦æ³¨æ»¡ä¸€æ¡¶æ°´ï¼Œè€Œè¦ç‚¹ç‡ƒä¸€æŠŠç«</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="æœç´¢..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%96-%E6%9C%AC%E7%AF%87%E5%86%85%E5%AE%B9"><span class="nav-number">1.</span> <span class="nav-text">ğŸ“– æœ¬ç¯‡å†…å®¹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%90%86%E5%BF%B5%E7%AF%87%EF%BC%9A%E4%BB%8E%E6%B7%B7%E4%B9%B1%E5%88%B0%E6%B8%85%E6%99%B0%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3"><span class="nav-number">1.1.</span> <span class="nav-text">ç†å¿µç¯‡ï¼šä»æ··ä¹±åˆ°æ¸…æ™°çš„è®¾è®¡æ€æƒ³</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E7%AF%87%EF%BC%9A%E4%BB%A3%E7%A0%81%E4%B8%8E%E6%9E%B6%E6%9E%84%E7%9A%84%E8%90%BD%E5%9C%B0%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.2.</span> <span class="nav-text">å®ç°ç¯‡ï¼šä»£ç ä¸æ¶æ„çš„è½åœ°å®ç°</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E6%B8%85%E6%B4%81%E6%9E%B6%E6%9E%84%E7%9A%84%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="nav-number">2.</span> <span class="nav-text">ç¬¬ä¸€éƒ¨åˆ† - æ¸…æ´æ¶æ„çš„æ ¸å¿ƒæ€æƒ³</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8E%E2%80%9D%E8%BF%87%E7%A8%8B%E5%BC%8F%E6%8E%A7%E5%88%B6%E2%80%9D%E5%88%B0%E2%80%9D%E6%A8%A1%E5%9D%97%E5%8C%96%E6%8E%A7%E5%88%B6%E2%80%9D"><span class="nav-number">2.1.</span> <span class="nav-text">ä»â€è¿‡ç¨‹å¼æ§åˆ¶â€åˆ°â€æ¨¡å—åŒ–æ§åˆ¶â€</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%84%8F%E6%9E%B6%E6%9E%84-vs-%E6%B8%85%E6%B4%81%E6%9E%B6%E6%9E%84%EF%BC%9A%E6%80%9D%E7%BB%B4%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94"><span class="nav-number">2.1.1.</span> <span class="nav-text">è„æ¶æ„ vs æ¸…æ´æ¶æ„ï¼šæ€ç»´æ–¹å¼å¯¹æ¯”</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E2%80%9C%E6%B8%85%E6%B4%81%E2%80%9D%E7%9A%84%E5%AE%9A%E4%B9%89%EF%BC%88%E5%9C%A8%E6%9C%AC%E9%A1%B9%E7%9B%AE%E8%AF%AD%E5%A2%83%E4%B8%8B%EF%BC%89"><span class="nav-number">2.1.2.</span> <span class="nav-text">â€œæ¸…æ´â€çš„å®šä¹‰ï¼ˆåœ¨æœ¬é¡¹ç›®è¯­å¢ƒä¸‹ï¼‰</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E6%B8%85%E6%B4%81%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%8E%9F%E5%88%99"><span class="nav-number">3.</span> <span class="nav-text">ç¬¬äºŒéƒ¨åˆ† - æ¸…æ´è®¾è®¡çš„åŸåˆ™</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-0-%E8%84%8F%E6%9E%B6%E6%9E%84%E7%9A%84%E4%BB%A3%E4%BB%B7%E5%AF%B9%E6%AF%94"><span class="nav-number">3.1.</span> <span class="nav-text">2.0 è„æ¶æ„çš„ä»£ä»·å¯¹æ¯”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87"><span class="nav-number">3.2.</span> <span class="nav-text">2.1 æ ¸å¿ƒè®¾è®¡ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E5%85%B3%E9%94%AE%E8%AE%BE%E8%AE%A1%E5%86%B3%E7%AD%96"><span class="nav-number">3.3.</span> <span class="nav-text">2.2 å…³é”®è®¾è®¡å†³ç­–</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%B3%E7%AD%96-1%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%8E%82-Lambda-%E4%BB%A3%E6%9B%BF%E8%99%9A%E5%87%BD%E6%95%B0"><span class="nav-number">3.3.1.</span> <span class="nav-text">å†³ç­– 1ï¼šä½¿ç”¨å·¥å‚ Lambda ä»£æ›¿è™šå‡½æ•°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%B3%E7%AD%96-2%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%AD%97%E7%AC%A6%E4%B8%B2-Key-%E8%80%8C%E9%9D%9E%E6%9E%9A%E4%B8%BE"><span class="nav-number">3.3.2.</span> <span class="nav-text">å†³ç­– 2ï¼šä½¿ç”¨å­—ç¬¦ä¸² Key è€Œéæšä¸¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%B3%E7%AD%96-3%EF%BC%9A%E4%BD%BF%E7%94%A8-std-any-%E5%81%9A%E6%B6%88%E6%81%AF%E5%AE%B9%E5%99%A8"><span class="nav-number">3.3.3.</span> <span class="nav-text">å†³ç­– 3ï¼šä½¿ç”¨ std::any åšæ¶ˆæ¯å®¹å™¨</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E6%B8%85%E6%B4%81%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">4.</span> <span class="nav-text">ç¬¬ä¸‰éƒ¨åˆ† - æ¸…æ´è®¾è®¡çš„å®ç°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="nav-number">4.1.</span> <span class="nav-text">3.1 æ ¸å¿ƒç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ControllerInterface%EF%BC%88%E4%B8%AD%E5%A4%AE%E6%B3%A8%E5%86%8C%E8%A1%A8%EF%BC%89"><span class="nav-number">4.1.1.</span> <span class="nav-text">ControllerInterfaceï¼ˆä¸­å¤®æ³¨å†Œè¡¨ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E7%B1%BB%E8%AE%BE%E8%AE%A1"><span class="nav-number">4.1.2.</span> <span class="nav-text">åŸºç±»è®¾è®¡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%B3%A8%E5%86%8C"><span class="nav-number">4.1.3.</span> <span class="nav-text">å·¥å‚æ–¹æ³•æ³¨å†Œ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%88config-yaml%EF%BC%89"><span class="nav-number">4.1.4.</span> <span class="nav-text">é…ç½®æ–‡ä»¶ï¼ˆconfig.yamlï¼‰</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B"><span class="nav-number">4.2.</span> <span class="nav-text">3.2 åˆå§‹åŒ–æµç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A4-1%EF%BC%9A%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE"><span class="nav-number">4.2.1.</span> <span class="nav-text">æ­¥éª¤ 1ï¼šåŠ è½½é…ç½®</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A4-2-3%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-number">4.2.2.</span> <span class="nav-text">æ­¥éª¤ 2-3ï¼šåˆå§‹åŒ–æ§åˆ¶å™¨</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E6%B7%BB%E5%8A%A0%E6%96%B0%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%AE%8C%E6%95%B4%E6%AD%A5%E9%AA%A4"><span class="nav-number">4.3.</span> <span class="nav-text">3.3 æ·»åŠ æ–°æ§åˆ¶å™¨çš„å®Œæ•´æ­¥éª¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88"><span class="nav-number">4.4.</span> <span class="nav-text">ç³»ç»Ÿæ¶æ„æ€»è§ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86-%E4%B8%8E-pluginlib-%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-number">5.</span> <span class="nav-text">ç¬¬å››éƒ¨åˆ† - ä¸ pluginlib çš„å¯¹æ¯”</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E6%AF%94%E8%A1%A8"><span class="nav-number">5.1.</span> <span class="nav-text">å¯¹æ¯”è¡¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AA%E4%BA%BA%E7%9A%84%E5%AE%9E%E6%88%98%E9%80%89%E6%8B%A9"><span class="nav-number">5.2.</span> <span class="nav-text">ä¸ªäººçš„å®æˆ˜é€‰æ‹©</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%95%E6%97%B6%E9%80%89%E6%8B%A9%E5%93%AA%E4%B8%AA%E6%96%B9%E6%A1%88"><span class="nav-number">5.3.</span> <span class="nav-text">ä½•æ—¶é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E9%83%A8%E5%88%86-%E4%B8%AA%E4%BA%BA%E5%8F%8D%E6%80%9D"><span class="nav-number">6.</span> <span class="nav-text">ç¬¬äº”éƒ¨åˆ† - ä¸ªäººåæ€</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E8%84%8F%E6%9E%B6%E6%9E%84%E8%AE%A9%E6%88%91%E5%90%83%E8%BF%87%E7%9A%84%E8%8B%A6"><span class="nav-number">6.1.</span> <span class="nav-text">5.1 è„æ¶æ„è®©æˆ‘åƒè¿‡çš„è‹¦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%E6%B8%85%E6%B4%81%E8%AE%BE%E8%AE%A1%E7%9A%84%E8%BD%AC%E6%8A%98%E7%82%B9"><span class="nav-number">6.2.</span> <span class="nav-text">5.2 æ¸…æ´è®¾è®¡çš„è½¬æŠ˜ç‚¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-%E8%BF%81%E7%A7%BB%E7%9A%84%E6%94%B6%E7%9B%8A"><span class="nav-number">6.3.</span> <span class="nav-text">5.3 è¿ç§»çš„æ”¶ç›Š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-%E5%85%B3%E9%94%AE%E9%A2%86%E6%82%9F"><span class="nav-number">6.4.</span> <span class="nav-text">5.4 å…³é”®é¢†æ‚Ÿ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">7.</span> <span class="nav-text">æ€»ç»“</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8E%E8%84%8F%E5%88%B0%E6%B8%85%E6%B4%81%E7%9A%84%E5%85%B3%E9%94%AE%E6%B4%9E%E5%AF%9F"><span class="nav-number">7.1.</span> <span class="nav-text">ä»è„åˆ°æ¸…æ´çš„å…³é”®æ´å¯Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E6%80%BB%E7%BB%93"><span class="nav-number">7.2.</span> <span class="nav-text">è®¾è®¡åŸåˆ™æ€»ç»“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E5%90%8E%E7%9A%84%E8%AF%9D"><span class="nav-number">7.3.</span> <span class="nav-text">æœ€åçš„è¯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8A%E7%AF%87%E5%9B%9E%E9%A1%BE"><span class="nav-number">8.</span> <span class="nav-text">ä¸Šç¯‡å›é¡¾</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ding Kaiyue"
      src="/images/header.jpeg">
  <p class="site-author-name" itemprop="name">Ding Kaiyue</p>
  <div class="site-description" itemprop="description">åˆ†äº«æŠ€æœ¯ã€ç”Ÿæ´»å’Œæƒ³æ³•</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Ding-Kaiyue" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Ding-Kaiyue" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:dingkaiyue61@gmail.com" title="E-Mail â†’ mailto:dingkaiyue61@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ding-kaiyue.github.io/2025/11/01/%E4%BB%8E%E7%A1%AC%E7%BC%96%E7%A0%81%E5%88%B0%E6%8F%92%E4%BB%B6%E5%8C%96%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89%EF%BC%9A%E6%B8%85%E6%B4%81%E6%9E%B6%E6%9E%84%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpeg">
      <meta itemprop="name" content="Ding Kaiyue">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ding Kaiyue's Blog">
      <meta itemprop="description" content="åˆ†äº«æŠ€æœ¯ã€ç”Ÿæ´»å’Œæƒ³æ³•">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸‹ç¯‡ï¼‰ï¼šæ¸…æ´æ¶æ„çš„è®¾è®¡ä¸å®ç° | Ding Kaiyue's Blog">
      <meta itemprop="description" content="æœ¬æ–‡å±•ç¤ºæˆ‘å¦‚ä½•ä»¥æ¸…æ´æ¶æ„æ€æƒ³é‡æ„æ§åˆ¶å™¨æ³¨å†Œæœºåˆ¶ï¼Œæ„å»ºä¸€ä¸ªæ¨¡å—åŒ–ã€å¯é…ç½®ã€å¯æ‰©å±•çš„æœºå™¨äººæ§åˆ¶ç³»ç»Ÿã€‚">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸‹ç¯‡ï¼‰ï¼šæ¸…æ´æ¶æ„çš„è®¾è®¡ä¸å®ç°
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-11-01 18:33:00" itemprop="dateCreated datePublished" datetime="2025-11-01T18:33:00+08:00">2025-11-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-11-03 08:56:48" itemprop="dateModified" datetime="2025-11-03T08:56:48+08:00">2025-11-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8E%A7%E5%88%B6%E6%9E%B6%E6%9E%84%E7%AF%87-%E4%BB%8E%E6%A8%A1%E5%BC%8F%E5%88%B0%E5%B7%A5%E5%8E%82/" itemprop="url" rel="index"><span itemprop="name">æ§åˆ¶æ¶æ„ç¯‡-ä»æ¨¡å¼åˆ°å·¥å‚</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>11k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>10 åˆ†é’Ÿ</span>
    </span>
</div>

            <div class="post-description">æœ¬æ–‡å±•ç¤ºæˆ‘å¦‚ä½•ä»¥æ¸…æ´æ¶æ„æ€æƒ³é‡æ„æ§åˆ¶å™¨æ³¨å†Œæœºåˆ¶ï¼Œæ„å»ºä¸€ä¸ªæ¨¡å—åŒ–ã€å¯é…ç½®ã€å¯æ‰©å±•çš„æœºå™¨äººæ§åˆ¶ç³»ç»Ÿã€‚</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><blockquote>
<p>åœ¨ä¸Šç¯‡ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·ç»å†äº†é‚£æ®µæ··ä¹±çš„æ—¥å­â€”â€”å‡½æ•°ä¸Šåƒè¡Œã€æ¨¡å¼äº’ç›¸å¹²æ‰°ã€æ”¹ä¸€å¤„å´©å…¨å±€ã€‚</p>
<p>æœ¬ç¯‡ï¼Œæˆ‘ä»¬å°†äº²æ‰‹æ‹†è§£å¹¶é‡å»ºè¿™ä¸€åˆ‡ï¼šä»æ··ä¹±åˆ°æ¸…æ™°ï¼Œä»ç¡¬ç¼–ç åˆ°é…ç½®é©±åŠ¨ã€‚è¿™æ˜¯æˆ‘é¡¹ç›®æ¶æ„æ¼”åŒ–ä¸­æœ€å…³é”®çš„ä¸€æ­¥ã€‚</p>
</blockquote>
<p><strong>å‰ç½®é˜…è¯»</strong>ï¼š<a href="/2025/11/01/%E4%BB%8E%E7%A1%AC%E7%BC%96%E7%A0%81%E5%88%B0%E6%8F%92%E4%BB%B6%E5%8C%96%EF%BC%88%E4%B8%8A%E7%AF%87%EF%BC%89%EF%BC%9A%E8%84%8F%E6%9E%B6%E6%9E%84%E7%9A%84%E9%97%AE%E9%A2%98%E8%AF%8A%E6%96%AD/">ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸Šç¯‡ï¼‰ï¼šè„æ¶æ„çš„é—®é¢˜è¯Šæ–­</a>ï¼ˆå¼ºçƒˆå»ºè®®å…ˆé˜…è¯»ï¼‰</p>
<p><strong>æœ¬æ–‡é€‚åˆ</strong>ï¼šæ¶æ„è®¾è®¡å¸ˆã€ROS2 å¼€å‘è€…ã€ä»¥åŠæƒ³å­¦ä¹ å®é™…é¡¹ç›®æ¶æ„çš„å·¥ç¨‹å¸ˆ</p>
<p><strong>å†…å®¹</strong>ï¼šè®¾è®¡ç†å¿µã€è®¾è®¡å†³ç­–ã€å®Œæ•´ä»£ç å®ç°ã€ä¸ pluginlib çš„å¯¹æ¯”ã€ä¸ªäººåæ€</p>
<hr>
<h2 id="ğŸ“–-æœ¬ç¯‡å†…å®¹"><a href="#ğŸ“–-æœ¬ç¯‡å†…å®¹" class="headerlink" title="ğŸ“– æœ¬ç¯‡å†…å®¹"></a>ğŸ“– æœ¬ç¯‡å†…å®¹</h2><h3 id="ç†å¿µç¯‡ï¼šä»æ··ä¹±åˆ°æ¸…æ™°çš„è®¾è®¡æ€æƒ³"><a href="#ç†å¿µç¯‡ï¼šä»æ··ä¹±åˆ°æ¸…æ™°çš„è®¾è®¡æ€æƒ³" class="headerlink" title="ç†å¿µç¯‡ï¼šä»æ··ä¹±åˆ°æ¸…æ™°çš„è®¾è®¡æ€æƒ³"></a>ç†å¿µç¯‡ï¼šä»æ··ä¹±åˆ°æ¸…æ™°çš„è®¾è®¡æ€æƒ³</h3><ol>
<li><strong><a href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E6%B8%85%E6%B4%81%E6%9E%B6%E6%9E%84%E7%9A%84%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3">æ¸…æ´æ¶æ„çš„æ ¸å¿ƒæ€æƒ³</a></strong></li>
<li><strong><a href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86-%E6%B8%85%E6%B4%81%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%8E%9F%E5%88%99">è®¾è®¡åŸåˆ™ä¸å…³é”®å†³ç­–</a></strong></li>
</ol>
<h3 id="å®ç°ç¯‡ï¼šä»£ç ä¸æ¶æ„çš„è½åœ°å®ç°"><a href="#å®ç°ç¯‡ï¼šä»£ç ä¸æ¶æ„çš„è½åœ°å®ç°" class="headerlink" title="å®ç°ç¯‡ï¼šä»£ç ä¸æ¶æ„çš„è½åœ°å®ç°"></a>å®ç°ç¯‡ï¼šä»£ç ä¸æ¶æ„çš„è½åœ°å®ç°</h3><ol start="3">
<li><strong><a href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86-%E6%B8%85%E6%B4%81%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%AE%9E%E7%8E%B0">å®Œæ•´ä»£ç å®ç°</a></strong></li>
<li><strong><a href="#%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86-%E4%B8%8E-pluginlib-%E7%9A%84%E5%AF%B9%E6%AF%94">ä¸ pluginlib çš„å¯¹æ¯”</a></strong></li>
<li><strong><a href="#%E7%AC%AC%E4%BA%94%E9%83%A8%E5%88%86-%E4%B8%AA%E4%BA%BA%E5%8F%8D%E6%80%9D">ä¸ªäººåæ€ä¸æ”¶ç›Š</a></strong></li>
</ol>
<hr>
<h2 id="ç¬¬ä¸€éƒ¨åˆ†-æ¸…æ´æ¶æ„çš„æ ¸å¿ƒæ€æƒ³"><a href="#ç¬¬ä¸€éƒ¨åˆ†-æ¸…æ´æ¶æ„çš„æ ¸å¿ƒæ€æƒ³" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† - æ¸…æ´æ¶æ„çš„æ ¸å¿ƒæ€æƒ³"></a>ç¬¬ä¸€éƒ¨åˆ† - æ¸…æ´æ¶æ„çš„æ ¸å¿ƒæ€æƒ³</h2><h3 id="ä»â€è¿‡ç¨‹å¼æ§åˆ¶â€åˆ°â€æ¨¡å—åŒ–æ§åˆ¶â€"><a href="#ä»â€è¿‡ç¨‹å¼æ§åˆ¶â€åˆ°â€æ¨¡å—åŒ–æ§åˆ¶â€" class="headerlink" title="ä»â€è¿‡ç¨‹å¼æ§åˆ¶â€åˆ°â€æ¨¡å—åŒ–æ§åˆ¶â€"></a>ä»â€è¿‡ç¨‹å¼æ§åˆ¶â€åˆ°â€æ¨¡å—åŒ–æ§åˆ¶â€</h3><p>åœ¨æ·±å…¥å…·ä½“çš„è®¾è®¡ç»†èŠ‚å‰ï¼Œå¿…é¡»å…ˆç†è§£<strong>æ€ç»´æ–¹å¼çš„è½¬å˜</strong>ã€‚</p>
<h4 id="è„æ¶æ„-vs-æ¸…æ´æ¶æ„ï¼šæ€ç»´æ–¹å¼å¯¹æ¯”"><a href="#è„æ¶æ„-vs-æ¸…æ´æ¶æ„ï¼šæ€ç»´æ–¹å¼å¯¹æ¯”" class="headerlink" title="è„æ¶æ„ vs æ¸…æ´æ¶æ„ï¼šæ€ç»´æ–¹å¼å¯¹æ¯”"></a>è„æ¶æ„ vs æ¸…æ´æ¶æ„ï¼šæ€ç»´æ–¹å¼å¯¹æ¯”</h4><table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>è„æ¶æ„ï¼ˆæ—©æœŸï¼‰</th>
<th>æ¸…æ´æ¶æ„ï¼ˆé‡æ„ï¼‰</th>
<th>æ”¶ç›Š</th>
</tr>
</thead>
<tbody><tr>
<td><strong>æ§åˆ¶é€»è¾‘</strong></td>
<td>StateMachine ä¸»åŠ¨å‘½ä»¤å¼æ§åˆ¶</td>
<td>æ¯ä¸ªæ§åˆ¶å™¨è‡ªæˆ‘ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</td>
<td>èŒè´£æ¸…æ™°</td>
</tr>
<tr>
<td><strong>ä»£ç ç»„ç»‡</strong></td>
<td>æ‰€æœ‰æ¨¡å¼æ··åœ¨ä¸€ä¸ªç±»ä¸­ï¼ˆ1000+ è¡Œï¼‰</td>
<td>æ¯ä¸ªæ¨¡å¼ç‹¬ç«‹æˆç±»ï¼Œå®ç°ç»Ÿä¸€æ¥å£</td>
<td>æ˜“ç»´æŠ¤</td>
</tr>
<tr>
<td><strong>æ¨¡å¼åˆ‡æ¢</strong></td>
<td>å·¨å¤§ switch-case + å…¨å±€çŠ¶æ€</td>
<td>å·¥å‚ + æ³¨å†Œæœºåˆ¶è‡ªåŠ¨åˆ‡æ¢</td>
<td>æ—  merge å†²çª</td>
</tr>
<tr>
<td><strong>é…ç½®æ–¹å¼</strong></td>
<td>ç¡¬ç¼–ç è¯é¢˜ã€å‚æ•°ã€æ¨¡å¼</td>
<td>YAML é…ç½®æ–‡ä»¶åŠ¨æ€åŠ è½½</td>
<td>æ— éœ€æ”¹ä»£ç </td>
</tr>
<tr>
<td><strong>è€¦åˆå…³ç³»</strong></td>
<td>æ··åœ¨ä¸€èµ·ï¼Œæ— æ³•éš”ç¦»</td>
<td>é€šè¿‡æ¥å£éš”ç¦»ï¼Œåˆ†å±‚æ¸…æ™°</td>
<td>å¯ç‹¬ç«‹æµ‹è¯•</td>
</tr>
<tr>
<td><strong>æ‰©å±•æ€§</strong></td>
<td>æ·»åŠ æ¨¡å¼ â†’ æ”¹ 6-8 å¤„ä»£ç </td>
<td>æ·»åŠ æ¨¡å¼ â†’ æ–°æ–‡ä»¶ + æ”¹ 1 è¡Œ</td>
<td>æˆæœ¬æ’å®š</td>
</tr>
<tr>
<td><strong>å¯æµ‹è¯•æ€§</strong></td>
<td>æ— æ³•å•ç‹¬æµ‹è¯•æ§åˆ¶å™¨</td>
<td>æ§åˆ¶å™¨å¯ç‹¬ç«‹å•å…ƒæµ‹è¯•</td>
<td>è´¨é‡ä¿è¯</td>
</tr>
<tr>
<td><strong>å¤æ‚åº¦å¢é•¿</strong></td>
<td>çº¿æ€§å¢é•¿ï¼ˆæ¯ä¸ªæ¨¡å¼ +150 è¡Œï¼‰</td>
<td>å¸¸æ•°å¢é•¿ï¼ˆæ ¸å¿ƒä»£ç ä¸å˜ï¼‰</td>
<td>å¯æŒç»­æ¼”åŒ–</td>
</tr>
</tbody></table>
<h4 id="â€œæ¸…æ´â€çš„å®šä¹‰ï¼ˆåœ¨æœ¬é¡¹ç›®è¯­å¢ƒä¸‹ï¼‰"><a href="#â€œæ¸…æ´â€çš„å®šä¹‰ï¼ˆåœ¨æœ¬é¡¹ç›®è¯­å¢ƒä¸‹ï¼‰" class="headerlink" title="â€œæ¸…æ´â€çš„å®šä¹‰ï¼ˆåœ¨æœ¬é¡¹ç›®è¯­å¢ƒä¸‹ï¼‰"></a>â€œæ¸…æ´â€çš„å®šä¹‰ï¼ˆåœ¨æœ¬é¡¹ç›®è¯­å¢ƒä¸‹ï¼‰</h4><p><strong>æ¸…æ´æ¶æ„</strong> éµå¾ªä»¥ä¸‹å››æ¡<strong>å®ç”¨æ¸…æ´åŸåˆ™</strong>ï¼š</p>
<ol>
<li><strong>ç‹¬ç«‹æ€§</strong>ï¼šæ§åˆ¶å™¨å¯ä»¥è„±ç¦»ä¸»èŠ‚ç‚¹å•ç‹¬è¿è¡Œã€å•å…ƒæµ‹è¯•</li>
<li><strong>é…ç½®é©±åŠ¨</strong>ï¼šä¸ä¿®æ”¹ä»£ç å³å¯æ·»åŠ æˆ–è°ƒæ•´æ§åˆ¶å™¨</li>
<li><strong>èŒè´£å•ä¸€</strong>ï¼šæ¯ä¸ªç±»åªåšä¸€ä»¶äº‹ï¼ˆSRP åŸåˆ™ï¼‰</li>
<li><strong>æ¼”åŒ–å‹å¥½</strong>ï¼šæ–°æ§åˆ¶å™¨çš„æ¥å…¥ä¸å½±å“æ—§æ§åˆ¶å™¨</li>
</ol>
<p><strong>æ¢å¥è¯è¯´</strong>ï¼šæ¸…æ´æ¶æ„çš„ç›®æ ‡ï¼Œä¸æ˜¯è¿½æ±‚â€ä¼˜é›…â€çš„ä»£ç ï¼Œè€Œæ˜¯è¿½æ±‚**â€å¯æŒç»­æ¼”åŒ–â€çš„ç³»ç»Ÿ**ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>æ·»åŠ ç¬¬ 10 ä¸ªæ§åˆ¶å™¨å’Œæ·»åŠ ç¬¬ 100 ä¸ªæ§åˆ¶å™¨çš„æˆæœ¬<strong>å¤§è‡´ç›¸åŒ</strong></li>
<li>ä¸€ä¸ªæ§åˆ¶å™¨çš„ bug ä¿®å¤<strong>ä¸ä¼šå½±å“</strong>å…¶ä»–æ§åˆ¶å™¨</li>
<li>æ–°æˆå‘˜åŠ å…¥å›¢é˜Ÿ<strong>ä¸éœ€è¦</strong>ç†è§£å…¨éƒ¨æ§åˆ¶é€»è¾‘</li>
</ul>
<hr>
<h2 id="ç¬¬äºŒéƒ¨åˆ†-æ¸…æ´è®¾è®¡çš„åŸåˆ™"><a href="#ç¬¬äºŒéƒ¨åˆ†-æ¸…æ´è®¾è®¡çš„åŸåˆ™" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† - æ¸…æ´è®¾è®¡çš„åŸåˆ™"></a>ç¬¬äºŒéƒ¨åˆ† - æ¸…æ´è®¾è®¡çš„åŸåˆ™</h2><h3 id="2-0-è„æ¶æ„çš„ä»£ä»·å¯¹æ¯”"><a href="#2-0-è„æ¶æ„çš„ä»£ä»·å¯¹æ¯”" class="headerlink" title="2.0 è„æ¶æ„çš„ä»£ä»·å¯¹æ¯”"></a>2.0 è„æ¶æ„çš„ä»£ä»·å¯¹æ¯”</h3><p>æ·»åŠ æ–°æ§åˆ¶å™¨æ—¶çš„ä¿®æ”¹æˆæœ¬å¯¹æ¯”ï¼š</p>
<table>
<thead>
<tr>
<th>æŒ‡æ ‡</th>
<th>è„æ¶æ„</th>
<th>æ¸…æ´æ¶æ„</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ä¿®æ”¹æ–‡ä»¶æ•°</strong></td>
<td>6-8 ä¸ª</td>
<td>3 ä¸ª</td>
</tr>
<tr>
<td><strong>ä¿®æ”¹æ ¸å¿ƒä»£ç å¤„æ•°</strong></td>
<td>6-8 å¤„</td>
<td>1 å¤„</td>
</tr>
<tr>
<td><strong>æ–°å¢æ€»ä»£ç è¡Œæ•°</strong></td>
<td>200-300 è¡Œ</td>
<td>150-250 è¡Œ</td>
</tr>
<tr>
<td><strong>æ–°å¢æ ¸å¿ƒä»£ç è¡Œæ•°</strong></td>
<td>~100 è¡Œ</td>
<td>&lt; 10 è¡Œ</td>
</tr>
<tr>
<td><strong>åˆ›å»ºæ–°æ–‡ä»¶</strong></td>
<td>æ— </td>
<td>1 ä¸ªï¼ˆcontroller ç±»ï¼‰</td>
</tr>
<tr>
<td><strong>å¼€å‘å‘¨æœŸ</strong></td>
<td>1-3 å¤©</td>
<td>2-4 å°æ—¶</td>
</tr>
<tr>
<td><strong>merge å†²çªé£é™©</strong></td>
<td>é«˜ï¼ˆå¤šäººæ”¹åŒä¸€å¤„ï¼‰</td>
<td>ä½ï¼ˆå‡ ä¹æ— å†²çªï¼‰</td>
</tr>
<tr>
<td><strong>å›å½’æµ‹è¯•èŒƒå›´</strong></td>
<td>æ•´ä¸ª StateMachine</td>
<td>ä»…æ–°æ§åˆ¶å™¨</td>
</tr>
</tbody></table>
<p><strong>å…·ä½“ä¿®æ”¹æ¸…å•å¯¹æ¯”</strong>ï¼š</p>
<p>è„æ¶æ„éœ€è¦æ”¹ï¼š</p>
<ol>
<li>robot_state_machine.hpp - æ·»åŠ  5-10 ä¸ªæˆå‘˜å˜é‡</li>
<li>robot_state_machine.cpp æ„é€ å‡½æ•° - æ·»åŠ è®¢é˜…</li>
<li>working_mode_callback() - æ·»åŠ  case</li>
<li>æ–°å¢ 5 ä¸ªæ–°çš„å›è°ƒ&#x2F;çº¿ç¨‹å‡½æ•°</li>
</ol>
<p>æ¸…æ´æ¶æ„åªéœ€ï¼š</p>
<ol>
<li>åˆ›å»º my_new_controller.hpp&#x2F;cpp</li>
<li>controller_registry.cpp æ·»åŠ  1 è¡Œ</li>
<li>config.yaml æ·»åŠ  4 è¡Œé…ç½®</li>
</ol>
<h3 id="2-1-æ ¸å¿ƒè®¾è®¡ç›®æ ‡"><a href="#2-1-æ ¸å¿ƒè®¾è®¡ç›®æ ‡" class="headerlink" title="2.1 æ ¸å¿ƒè®¾è®¡ç›®æ ‡"></a>2.1 æ ¸å¿ƒè®¾è®¡ç›®æ ‡</h3><p>æˆ‘ä»¬å¸Œæœ›å®ç°ä¸€ä¸ªç³»ç»Ÿï¼Œæ»¡è¶³ï¼š</p>
<ol>
<li><strong>é…ç½®é©±åŠ¨</strong>ï¼šåœ¨ YAML ä¸­å£°æ˜æ§åˆ¶å™¨ï¼Œä»£ç è‡ªåŠ¨åŠ è½½</li>
<li><strong>æ¾è€¦åˆ</strong>ï¼šæ·»åŠ æ–°æ§åˆ¶å™¨ä¸éœ€è¦ä¿®æ”¹æ ¸å¿ƒä»£ç </li>
<li><strong>å•ä¸€èŒè´£</strong>ï¼šæ¯ä¸ªæ§åˆ¶å™¨åªç®¡ç†è‡ªå·±</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šç¼–è¯‘æœŸæ£€æŸ¥ï¼Œé¿å…è¿è¡ŒæœŸé”™è¯¯</li>
<li><strong>æ˜“äºæ‰©å±•</strong>ï¼šæ–°æ§åˆ¶å™¨å¼€å‘è€…åªéœ€å®ç°æ¥å£</li>
</ol>
<h3 id="2-2-å…³é”®è®¾è®¡å†³ç­–"><a href="#2-2-å…³é”®è®¾è®¡å†³ç­–" class="headerlink" title="2.2 å…³é”®è®¾è®¡å†³ç­–"></a>2.2 å…³é”®è®¾è®¡å†³ç­–</h3><h4 id="å†³ç­–-1ï¼šä½¿ç”¨å·¥å‚-Lambda-ä»£æ›¿è™šå‡½æ•°"><a href="#å†³ç­–-1ï¼šä½¿ç”¨å·¥å‚-Lambda-ä»£æ›¿è™šå‡½æ•°" class="headerlink" title="å†³ç­– 1ï¼šä½¿ç”¨å·¥å‚ Lambda ä»£æ›¿è™šå‡½æ•°"></a><strong>å†³ç­– 1ï¼šä½¿ç”¨å·¥å‚ Lambda ä»£æ›¿è™šå‡½æ•°</strong></h4><p><strong>åé¢æ•™æï¼šSwitch-case çš„é—®é¢˜</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ æ—§æ–¹å¼ï¼šå·¨å¤§çš„ switch-case</span></span><br><span class="line"><span class="function">std::shared_ptr&lt;ModeControllerBase&gt; <span class="title">create_controller</span><span class="params">(<span class="type">const</span> std::string&amp; class_name, rclcpp::Node::SharedPtr node)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(<span class="built_in">hash</span>(class_name)) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;MoveJController&quot;</span>_hash:</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;MoveJController&gt;(node);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;MoveLController&quot;</span>_hash:</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;MoveLController&gt;(node);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;CartesianVelocityController&quot;</span>_hash:</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;CartesianVelocityController&gt;(node);</span><br><span class="line">        <span class="comment">// ... æ¯æ·»åŠ ä¸€ä¸ªæ–°æ§åˆ¶å™¨ï¼Œè¿™ä¸ªå‡½æ•°å°±è¦ä¿®æ”¹ï¼</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>æ¯ä¸ªæ–°æ§åˆ¶å™¨éƒ½è¦ä¿®æ”¹è¿™ä¸ªåˆ›å»ºå‡½æ•°</li>
<li>switch-case ä¸æ–­å¢é•¿</li>
<li>å®¹æ˜“å‡ºç° merge å†²çª</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ“ æ¨èï¼šå·¥å‚ Lambda</span></span><br><span class="line"><span class="function">std::unordered_map&lt;std::string, ControllerInterface::Creator&gt; <span class="title">get_available_controllers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        &#123;<span class="string">&quot;MoveJController&quot;</span>, [](rclcpp::Node::SharedPtr node) &#123;</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;MoveJController&gt;(node); &#125;&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;MoveLController&quot;</span>, [](rclcpp::Node::SharedPtr node) &#123;</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;MoveLController&gt;(node); &#125;&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;CartesianVelocityController&quot;</span>, [](rclcpp::Node::SharedPtr node) &#123;</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;CartesianVelocityController&gt;(node); &#125;&#125;,</span><br><span class="line">        <span class="comment">// ... æ¯æ·»åŠ ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œåªéœ€æ·»åŠ  1 è¡Œï¼æ— éœ€ä¿®æ”¹åˆ›å»ºé€»è¾‘</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ—¶ï¼š</span></span><br><span class="line"><span class="keyword">auto</span> it = available.<span class="built_in">find</span>(class_name);</span><br><span class="line"><span class="keyword">if</span> (it != available.<span class="built_in">end</span>()) &#123;</span><br><span class="line">    <span class="keyword">auto</span> controller = it-&gt;<span class="built_in">second</span>(node);  <span class="comment">// è°ƒç”¨å¯¹åº”çš„å·¥å‚ Lambda</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¯¹æ¯”</strong>ï¼š</p>
<ul>
<li>æ—§æ–¹å¼ï¼šæ–°å¢æ§åˆ¶å™¨ â†’ ä¿®æ”¹åˆ›å»ºå‡½æ•° â†’ é‡æ–°ç¼–è¯‘æ•´ä¸ªé¡¹ç›®</li>
<li>æ–°æ–¹å¼ï¼šæ–°å¢æ§åˆ¶å™¨ â†’ åœ¨ map ä¸­æ·»åŠ ä¸€è¡Œ â†’ ä»£ç æ›´æ–°å³å¯</li>
</ul>
<h4 id="å†³ç­–-2ï¼šä½¿ç”¨å­—ç¬¦ä¸²-Key-è€Œéæšä¸¾"><a href="#å†³ç­–-2ï¼šä½¿ç”¨å­—ç¬¦ä¸²-Key-è€Œéæšä¸¾" class="headerlink" title="å†³ç­– 2ï¼šä½¿ç”¨å­—ç¬¦ä¸² Key è€Œéæšä¸¾"></a><strong>å†³ç­– 2ï¼šä½¿ç”¨å­—ç¬¦ä¸² Key è€Œéæšä¸¾</strong></h4><p><strong>åé¢æ•™æï¼šEnum çš„ç»´æŠ¤è´Ÿæ‹…</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ æ—§æ–¹å¼ï¼šæšä¸¾ + å­—ç¬¦ä¸²æ˜ å°„</span></span><br><span class="line"><span class="keyword">enum class</span> <span class="title class_">ControlMode</span> &#123;</span><br><span class="line">    CARTESIAN_VELOCITY = <span class="number">1</span>,</span><br><span class="line">    JOINT_VELOCITY = <span class="number">2</span>,</span><br><span class="line">    MOVE_J = <span class="number">3</span>,</span><br><span class="line">    MOVE_L = <span class="number">4</span>,</span><br><span class="line">    <span class="comment">// ... æ¯æ·»åŠ ä¸€ä¸ªæ¨¡å¼ï¼Œéœ€è¦æ·»åŠ æ–°çš„æšä¸¾å€¼</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿˜éœ€è¦ç»´æŠ¤ä¸€ä¸ªæ˜ å°„è¡¨</span></span><br><span class="line">std::map&lt;ControlMode, std::string&gt; mode_to_string = &#123;</span><br><span class="line">    &#123;ControlMode::CARTESIAN_VELOCITY, <span class="string">&quot;CartesianVelocity&quot;</span>&#125;,</span><br><span class="line">    &#123;ControlMode::JOINT_VELOCITY, <span class="string">&quot;JointVelocity&quot;</span>&#125;,</span><br><span class="line">    <span class="comment">// ... ä¸¤å¤„éƒ½è¦ä¿®æ”¹ï¼</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// YAML ä¸­</span></span><br><span class="line">mode: <span class="number">1</span>  <span class="comment">// ç”¨æšä¸¾å€¼ï¼Œä¸ç›´è§‚</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„é—®é¢˜ï¼š</p>
<ul>
<li>ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹è¦åŒæ—¶æ”¹ enum å’Œ mapping è¡¨</li>
<li>å®¹æ˜“é—æ¼æˆ–ä¸åŒæ­¥</li>
<li>YAML ä¸­ç”¨æ•°å­—ä¸ç›´è§‚</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ“ æ¨èï¼šå­—ç¬¦ä¸² Key</span></span><br><span class="line">controller_map_[<span class="string">&quot;CartesianVelocity&quot;</span>] = controller_instance;</span><br><span class="line"></span><br><span class="line"><span class="comment">// YAML ä¸­ï¼ˆå®Œå…¨ä¸€è‡´ï¼Œä¸€ç›®äº†ç„¶ï¼‰</span></span><br><span class="line">controllers:</span><br><span class="line">  - key: CartesianVelocity</span><br><span class="line">    <span class="keyword">class</span>: CartesianVelocityController</span><br></pre></td></tr></table></figure>

<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>YAML å’Œä»£ç ä¸­çš„ key å®Œå…¨ä¸€è‡´ï¼Œæ— éœ€è½¬æ¢</li>
<li>æ·»åŠ æ–°æ¨¡å¼æ—¶åªéœ€åœ¨ä¸€å¤„ä¿®æ”¹</li>
<li>è‡ªæè¿°ï¼Œéå¸¸ç›´è§‚</li>
</ul>
<h4 id="å†³ç­–-3ï¼šä½¿ç”¨-std-any-åšæ¶ˆæ¯å®¹å™¨"><a href="#å†³ç­–-3ï¼šä½¿ç”¨-std-any-åšæ¶ˆæ¯å®¹å™¨" class="headerlink" title="å†³ç­– 3ï¼šä½¿ç”¨ std::any åšæ¶ˆæ¯å®¹å™¨"></a><strong>å†³ç­– 3ï¼šä½¿ç”¨ std::any åšæ¶ˆæ¯å®¹å™¨</strong></h4><p><strong>é—®é¢˜ï¼šå¦‚ä½•åœ¨å¤šæ€çš„åŒæ—¶ä¿æŒç±»å‹å®‰å…¨ï¼Ÿ</strong></p>
<p>ä¸€ä¸ªå¸¸è§çš„é”™è¯¯åšæ³•æ˜¯ä½¿ç”¨ <code>void*</code> çš„è½¬å‹ï¼Œè¿™å¾ˆå±é™©ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ å±é™©çš„ void* è½¬å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ModeControllerBase</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">handle_message</span><span class="params">(<span class="type">void</span>* msg)</span> </span>= <span class="number">0</span>;  <span class="comment">// ç±»å‹ä¿¡æ¯ä¸¢å¤±ï¼</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CartesianVelocityController</span> : <span class="keyword">public</span> ModeControllerBase &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">handle_message</span><span class="params">(<span class="type">void</span>* msg)</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œéœ€è¦çŒœæµ‹ msg æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå®¹æ˜“å‡ºé”™</span></span><br><span class="line">        <span class="keyword">auto</span> twist = <span class="built_in">static_cast</span>&lt;geometry_msgs::msg::TwistStamped*&gt;(msg);</span><br><span class="line">        <span class="comment">// å¦‚æœ msg å®é™…ä¸Šæ˜¯å…¶ä»–ç±»å‹ï¼Œè¿è¡Œæ—¶ä¼šå´©æºƒ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šstd::any + æ¨¡æ¿çš„ç»„åˆ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ“ ç±»å‹å®‰å…¨çš„è§£å†³æ–¹æ¡ˆ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ModeControllerBase</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">handle_message</span><span class="params">(std::any msg)</span> </span>= <span class="number">0</span>;  <span class="comment">// ä¿ç•™ç±»å‹ä¿¡æ¯</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VelocityControllerImpl</span> : <span class="keyword">public</span> ModeControllerBase &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">handle_message</span><span class="params">(std::any msg)</span> <span class="keyword">override</span> <span class="keyword">final</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> typed_msg = std::<span class="built_in">any_cast</span>&lt;<span class="keyword">typename</span> T::SharedPtr&gt;(msg);  <span class="comment">// ç¼–è¯‘æœŸç±»å‹æ£€æŸ¥</span></span><br><span class="line">        <span class="built_in">velocity_callback</span>(typed_msg);  <span class="comment">// æ´¾ç”Ÿç±»æ— éœ€å…³å¿ƒè½¬æ¢</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>ç¼–è¯‘æœŸç±»å‹æ£€æŸ¥ï¼šç±»å‹ä¸åŒ¹é…ä¼šåœ¨ç¼–è¯‘æ—¶å¤±è´¥</li>
<li>æ´¾ç”Ÿç±»å®ç°è€…ä¸ç”¨å…³å¿ƒè½¬æ¢ç»†èŠ‚</li>
<li>å¤šæ€å’Œç±»å‹å®‰å…¨çš„å®Œç¾ç»“åˆ</li>
</ul>
<hr>
<h2 id="ç¬¬ä¸‰éƒ¨åˆ†-æ¸…æ´è®¾è®¡çš„å®ç°"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-æ¸…æ´è®¾è®¡çš„å®ç°" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ† - æ¸…æ´è®¾è®¡çš„å®ç°"></a>ç¬¬ä¸‰éƒ¨åˆ† - æ¸…æ´è®¾è®¡çš„å®ç°</h2><h3 id="3-1-æ ¸å¿ƒç»„ä»¶"><a href="#3-1-æ ¸å¿ƒç»„ä»¶" class="headerlink" title="3.1 æ ¸å¿ƒç»„ä»¶"></a>3.1 æ ¸å¿ƒç»„ä»¶</h3><h4 id="ControllerInterfaceï¼ˆä¸­å¤®æ³¨å†Œè¡¨ï¼‰"><a href="#ControllerInterfaceï¼ˆä¸­å¤®æ³¨å†Œè¡¨ï¼‰" class="headerlink" title="ControllerInterfaceï¼ˆä¸­å¤®æ³¨å†Œè¡¨ï¼‰"></a><strong>ControllerInterfaceï¼ˆä¸­å¤®æ³¨å†Œè¡¨ï¼‰</strong></h4><p><strong>ä¸ºä»€ä¹ˆç”¨å•ä¾‹ï¼Ÿ</strong></p>
<p>ControllerInterface æ˜¯ç³»ç»Ÿçš„â€é»„é¡µâ€â€”â€”å…¨å±€å”¯ä¸€çš„æ§åˆ¶å™¨åç§°åˆ°åˆ›å»ºæ–¹æ³•çš„æ˜ å°„ã€‚å®ƒéœ€è¦ï¼š</p>
<ul>
<li><strong>å…¨å±€å”¯ä¸€</strong>ï¼šç³»ç»Ÿåªæœ‰ä¸€ä»½æ³¨å†Œè¡¨</li>
<li><strong>å¯åŠ¨æ—¶åˆå§‹åŒ–</strong>ï¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶é›†ä¸­å¡«å……</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šå¤šä¸ªåœ°æ–¹éƒ½å¯èƒ½æŸ¥è¯¢</li>
<li><strong>ä¸ä¸šåŠ¡é€»è¾‘éš”ç¦»</strong>ï¼šä¸æ¶‰åŠå…·ä½“çš„ä¸šåŠ¡çŠ¶æ€</li>
</ul>
<p>å› æ­¤å•ä¾‹æ¨¡å¼æ˜¯åˆé€‚çš„é€‰æ‹©ã€‚å®ƒä¸æ˜¯â€ä¸šåŠ¡é€»è¾‘çš„å•ä¾‹â€ï¼ˆé‚£æ˜¯åæ¨¡å¼ï¼‰ï¼Œè€Œæ˜¯â€åŸºç¡€è®¾æ–½çš„å•ä¾‹â€ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ControllerInterface</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">using</span> Creator = std::function&lt;std::<span class="built_in">shared_ptr</span>&lt;ModeControllerBase&gt;(rclcpp::Node::SharedPtr)&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å•ä¾‹è·å–æ¥å£</span></span><br><span class="line">    <span class="function"><span class="type">static</span> ControllerInterface&amp; <span class="title">instance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">static</span> ControllerInterface instance;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å†Œæ§åˆ¶å™¨ç±»</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">register_class</span><span class="params">(<span class="type">const</span> std::string&amp; name, Creator creator)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> registry_.<span class="built_in">emplace</span>(name, creator).second;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæ§åˆ¶å™¨å®ä¾‹</span></span><br><span class="line">    <span class="function">std::shared_ptr&lt;ModeControllerBase&gt; <span class="title">create</span><span class="params">(<span class="type">const</span> std::string&amp; name, rclcpp::Node::SharedPtr node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> it = registry_.<span class="built_in">find</span>(name);</span><br><span class="line">        <span class="keyword">if</span> (it != registry_.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> it-&gt;<span class="built_in">second</span>(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">ControllerInterface</span>() = <span class="keyword">default</span>;</span><br><span class="line">    std::unordered_map&lt;std::string, Creator&gt; registry_;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>å•ä¾‹æ¨¡å¼ï¼šå…¨å±€å”¯ä¸€çš„æ³¨å†Œè¡¨</li>
<li>æŸ¥è¯¢ O(1) æ—¶é—´å¤æ‚åº¦</li>
</ul>
<h4 id="åŸºç±»è®¾è®¡"><a href="#åŸºç±»è®¾è®¡" class="headerlink" title="åŸºç±»è®¾è®¡"></a><strong>åŸºç±»è®¾è®¡</strong></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ModeControllerBase</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">start</span><span class="params">(<span class="type">const</span> std::string&amp; mapping = <span class="string">&quot;&quot;</span>)</span> </span>&#123; is_active_ = <span class="literal">true</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">stop</span><span class="params">(<span class="type">const</span> std::string&amp; mapping = <span class="string">&quot;&quot;</span>)</span> </span>&#123; is_active_ = <span class="literal">false</span>; <span class="keyword">return</span> <span class="literal">true</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">handle_message</span><span class="params">(std::any msg)</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">needs_hook_state</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">bool</span> is_active_ = <span class="literal">false</span>;</span><br><span class="line">    std::string mode_;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="å·¥å‚æ–¹æ³•æ³¨å†Œ"><a href="#å·¥å‚æ–¹æ³•æ³¨å†Œ" class="headerlink" title="å·¥å‚æ–¹æ³•æ³¨å†Œ"></a><strong>å·¥å‚æ–¹æ³•æ³¨å†Œ</strong></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// controller/controller_registry.cpp</span></span><br><span class="line"><span class="function">std::unordered_map&lt;std::string, ControllerInterface::Creator&gt; <span class="title">get_available_controllers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        &#123;<span class="string">&quot;CartesianVelocityController&quot;</span>, [](rclcpp::Node::SharedPtr node) &#123;</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;CartesianVelocityController&gt;(node);</span><br><span class="line">        &#125;&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;JointVelocityController&quot;</span>, [](rclcpp::Node::SharedPtr node) &#123;</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;JointVelocityController&gt;(node);</span><br><span class="line">        &#125;&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;MoveJController&quot;</span>, [](rclcpp::Node::SharedPtr node) &#123;</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;MoveJController&gt;(node);</span><br><span class="line">        &#125;&#125;,</span><br><span class="line">        <span class="comment">// ... æ›´å¤šæ§åˆ¶å™¨ ...</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®æ–‡ä»¶ï¼ˆconfig-yamlï¼‰"><a href="#é…ç½®æ–‡ä»¶ï¼ˆconfig-yamlï¼‰" class="headerlink" title="é…ç½®æ–‡ä»¶ï¼ˆconfig.yamlï¼‰"></a><strong>é…ç½®æ–‡ä»¶ï¼ˆconfig.yamlï¼‰</strong></h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">controllers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">CartesianVelocity</span></span><br><span class="line">    <span class="attr">class:</span> <span class="string">CartesianVelocityController</span></span><br><span class="line">    <span class="attr">input_topic:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">/controller_api/cartesian_velocity_action</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">JointVelocity</span></span><br><span class="line">    <span class="attr">class:</span> <span class="string">JointVelocityController</span></span><br><span class="line">    <span class="attr">input_topic:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">/controller_api/joint_velocity_action</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">MoveJ</span></span><br><span class="line">    <span class="attr">class:</span> <span class="string">MoveJController</span></span><br><span class="line">    <span class="attr">input_topic:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">/controller_api/movej_action</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-åˆå§‹åŒ–æµç¨‹"><a href="#3-2-åˆå§‹åŒ–æµç¨‹" class="headerlink" title="3.2 åˆå§‹åŒ–æµç¨‹"></a>3.2 åˆå§‹åŒ–æµç¨‹</h3><h4 id="æ­¥éª¤-1ï¼šåŠ è½½é…ç½®"><a href="#æ­¥éª¤-1ï¼šåŠ è½½é…ç½®" class="headerlink" title="æ­¥éª¤ 1ï¼šåŠ è½½é…ç½®"></a><strong>æ­¥éª¤ 1ï¼šåŠ è½½é…ç½®</strong></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ControllerManagerNode::load_config</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        std::string yaml_path = pkg_path + <span class="string">&quot;/config/config.yaml&quot;</span>;</span><br><span class="line">        yaml_config_ = YAML::<span class="built_in">LoadFile</span>(yaml_path);</span><br><span class="line">        <span class="built_in">RCLCPP_INFO</span>(<span class="built_in">get_logger</span>(), <span class="string">&quot;Configuration loaded successfully&quot;</span>);</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> std::exception&amp; e) &#123;</span><br><span class="line">        <span class="built_in">RCLCPP_FATAL</span>(<span class="built_in">get_logger</span>(), <span class="string">&quot;Failed to load configuration: %s&quot;</span>, e.<span class="built_in">what</span>());</span><br><span class="line">        rclcpp::<span class="built_in">shutdown</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ­¥éª¤-2-3ï¼šåˆå§‹åŒ–æ§åˆ¶å™¨"><a href="#æ­¥éª¤-2-3ï¼šåˆå§‹åŒ–æ§åˆ¶å™¨" class="headerlink" title="æ­¥éª¤ 2-3ï¼šåˆå§‹åŒ–æ§åˆ¶å™¨"></a><strong>æ­¥éª¤ 2-3ï¼šåˆå§‹åŒ–æ§åˆ¶å™¨</strong></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ControllerManagerNode::init_controllers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">auto</span> available = <span class="built_in">get_available_controllers</span>();  <span class="comment">// è·å–å·¥å‚æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; entry : yaml_config_[<span class="string">&quot;controllers&quot;</span>]) &#123;</span><br><span class="line">            std::string key = entry[<span class="string">&quot;key&quot;</span>].<span class="built_in">as</span>&lt;std::string&gt;();</span><br><span class="line">            std::string class_name = entry[<span class="string">&quot;class&quot;</span>].<span class="built_in">as</span>&lt;std::string&gt;();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">auto</span> it = available.<span class="built_in">find</span>(class_name);</span><br><span class="line">            <span class="keyword">if</span> (it != available.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                <span class="comment">// ä½¿ç”¨å·¥å‚æ–¹æ³•åˆ›å»ºå®ä¾‹</span></span><br><span class="line">                <span class="keyword">auto</span> controller = it-&gt;<span class="built_in">second</span>(<span class="keyword">this</span>-&gt;<span class="built_in">shared_from_this</span>());</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ³¨å†Œåˆ°ä¸­å¤®æ³¨å†Œè¡¨</span></span><br><span class="line">                ControllerInterface::<span class="built_in">instance</span>().<span class="built_in">register_class</span>(key, it-&gt;second);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ä¿å­˜åˆ°æœ¬åœ° map</span></span><br><span class="line">                controller_map_[key] = controller;</span><br><span class="line"></span><br><span class="line">                <span class="built_in">RCLCPP_INFO</span>(<span class="built_in">get_logger</span>(), <span class="string">&quot;Registered controller: %s&quot;</span>, key.<span class="built_in">c_str</span>());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> std::exception&amp; e) &#123;</span><br><span class="line">        <span class="built_in">RCLCPP_FATAL</span>(<span class="built_in">get_logger</span>(), <span class="string">&quot;Failed to initialize: %s&quot;</span>, e.<span class="built_in">what</span>());</span><br><span class="line">        rclcpp::<span class="built_in">shutdown</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-æ·»åŠ æ–°æ§åˆ¶å™¨çš„å®Œæ•´æ­¥éª¤"><a href="#3-3-æ·»åŠ æ–°æ§åˆ¶å™¨çš„å®Œæ•´æ­¥éª¤" class="headerlink" title="3.3 æ·»åŠ æ–°æ§åˆ¶å™¨çš„å®Œæ•´æ­¥éª¤"></a>3.3 æ·»åŠ æ–°æ§åˆ¶å™¨çš„å®Œæ•´æ­¥éª¤</h3><p>ç°åœ¨ï¼Œæ·»åŠ æ–°æ§åˆ¶å™¨å˜å¾—ç®€å•ï¼š</p>
<p><strong>æ­¥éª¤ 1</strong>ï¼šåˆ›å»ºæ–°æ§åˆ¶å™¨ç±»</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyNewController</span> : <span class="keyword">public</span> VelocityControllerImpl&lt;MyMessageType&gt; &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">velocity_callback</span><span class="params">(<span class="type">const</span> MyMessageType::SharedPtr msg)</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 2</strong>ï¼šåœ¨ <code>get_available_controllers()</code> ä¸­æ·»åŠ ä¸€è¡Œ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;MyNewController&quot;</span>, [](rclcpp::Node::SharedPtr node) &#123;</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">make_shared</span>&lt;MyNewController&gt;(node);</span><br><span class="line">&#125;&#125;,</span><br></pre></td></tr></table></figure>

<p><strong>æ­¥éª¤ 3</strong>ï¼šåœ¨ YAML ä¸­æ·»åŠ é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">key:</span> <span class="string">MyNewMode</span></span><br><span class="line">  <span class="attr">class:</span> <span class="string">MyNewController</span></span><br><span class="line">  <span class="attr">input_topic:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">/controller_api/my_new_mode_action</span></span><br></pre></td></tr></table></figure>

<p><strong>å®Œæˆï¼</strong> ç³»ç»Ÿè‡ªåŠ¨åŠ è½½æ–°æ§åˆ¶å™¨ã€‚</p>
<h3 id="ç³»ç»Ÿæ¶æ„æ€»è§ˆ"><a href="#ç³»ç»Ÿæ¶æ„æ€»è§ˆ" class="headerlink" title="ç³»ç»Ÿæ¶æ„æ€»è§ˆ"></a>ç³»ç»Ÿæ¶æ„æ€»è§ˆ</h3><p>ç»è¿‡ä»¥ä¸Šä¸‰æ­¥ï¼Œæ–°æ§åˆ¶å™¨å·²è¢«æ•´åˆåˆ°æ¸…æ´æ¶æ„ä¸­ã€‚å®è§‚æ¥çœ‹ï¼Œç³»ç»Ÿçš„ç»„ç»‡ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p>
<p><strong>ç¬¬ä¸€å±‚ï¼šControllerManagerï¼ˆä¸»ç®¡ç†å™¨ï¼‰</strong></p>
<ul>
<li>èŒè´£ï¼šåˆå§‹åŒ–ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æ¨¡å¼åˆ‡æ¢</li>
<li>å…³é”®æ–¹æ³•ï¼š<code>load_config()</code> â†’ <code>init_controllers()</code> â†’ <code>handle_work_mode()</code></li>
<li>ç‰¹ç‚¹ï¼šä»£ç è¡Œæ•°ä¿æŒç¨³å®šï¼Œä¸æ§åˆ¶å™¨æ•°é‡æ— å…³</li>
</ul>
<p><strong>ç¬¬äºŒå±‚ï¼šControllerInterfaceï¼ˆä¸­å¤®æ³¨å†Œè¡¨ï¼‰</strong></p>
<ul>
<li>èŒè´£ï¼šç»´æŠ¤å…¨å±€çš„æ§åˆ¶å™¨æ˜ å°„ï¼ˆkey â†’ factory methodï¼‰</li>
<li>å®ç°æ–¹å¼ï¼šå•ä¾‹æ¨¡å¼</li>
<li>ç‰¹ç‚¹ï¼šå¯åŠ¨æ—¶é›†ä¸­åˆå§‹åŒ–ï¼Œè¿è¡Œæ—¶ O(1) æŸ¥è¯¢</li>
</ul>
<p><strong>ç¬¬ä¸‰å±‚ï¼šå„ä¸ªå…·ä½“æ§åˆ¶å™¨</strong></p>
<ul>
<li>CartesianVelocityControllerï¼ˆç¬›å¡å°”é€Ÿåº¦æ§åˆ¶ï¼‰</li>
<li>JointVelocityControllerï¼ˆå…³èŠ‚é€Ÿåº¦æ§åˆ¶ï¼‰</li>
<li>MoveJControllerï¼ˆå…³èŠ‚æ’å€¼è¿åŠ¨ï¼‰</li>
<li>â€¦ æ›´å¤šæ§åˆ¶å™¨</li>
</ul>
<p><strong>æ‰©å±•æµç¨‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ–°å¢æ§åˆ¶å™¨ç±» (MyNewController.hpp/.cpp)</span><br><span class="line">           â†“</span><br><span class="line">åœ¨ registry.cpp æ·»åŠ ä¸€è¡Œå·¥å‚æ–¹æ³•</span><br><span class="line">           â†“</span><br><span class="line">åœ¨ config.yaml æ·»åŠ æ§åˆ¶å™¨é…ç½®</span><br><span class="line">           â†“</span><br><span class="line">ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç </span><br></pre></td></tr></table></figure>

<p><strong>è¿™ä¸ªç»“æ„çš„æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… ControllerManager çš„ä»£ç é‡ä¸å¢é•¿ï¼ˆæ–°å¢æ§åˆ¶å™¨å¯¹å®ƒé€æ˜ï¼‰</li>
<li>âœ… æ§åˆ¶å™¨ä¹‹é—´å®Œå…¨ç‹¬ç«‹ï¼ˆæ— è€¦åˆï¼Œå¯å¹¶è¡Œå¼€å‘ï¼‰</li>
<li>âœ… é…ç½®é©±åŠ¨ï¼ˆYAML ä¿®æ”¹å³å¯å¯ç”¨&#x2F;ç¦ç”¨ï¼‰</li>
<li>âœ… æ˜“äºæµ‹è¯•ï¼ˆæ¯ä¸ªæ§åˆ¶å™¨å¯ç‹¬ç«‹å•å…ƒæµ‹è¯•ï¼‰</li>
</ul>
<hr>
<h2 id="ç¬¬å››éƒ¨åˆ†-ä¸-pluginlib-çš„å¯¹æ¯”"><a href="#ç¬¬å››éƒ¨åˆ†-ä¸-pluginlib-çš„å¯¹æ¯”" class="headerlink" title="ç¬¬å››éƒ¨åˆ† - ä¸ pluginlib çš„å¯¹æ¯”"></a>ç¬¬å››éƒ¨åˆ† - ä¸ pluginlib çš„å¯¹æ¯”</h2><h3 id="å¯¹æ¯”è¡¨"><a href="#å¯¹æ¯”è¡¨" class="headerlink" title="å¯¹æ¯”è¡¨"></a>å¯¹æ¯”è¡¨</h3><table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>å½“å‰æ–¹æ¡ˆ</th>
<th>pluginlib</th>
</tr>
</thead>
<tbody><tr>
<td><strong>åŠ è½½æ—¶æœº</strong></td>
<td>ç¼–è¯‘æœŸ</td>
<td>è¿è¡ŒæœŸ</td>
</tr>
<tr>
<td><strong>ç»‘å®šæ–¹å¼</strong></td>
<td>é™æ€é“¾æ¥</td>
<td>åŠ¨æ€åŠ è½½ï¼ˆdlopenï¼‰</td>
</tr>
<tr>
<td><strong>é…ç½®æ–‡ä»¶</strong></td>
<td>YAML</td>
<td>XML</td>
</tr>
<tr>
<td><strong>æ§åˆ¶å™¨æ•°é‡</strong></td>
<td>&lt; 50 ä¸ªé€‚åˆ</td>
<td>&gt; 50 ä¸ªé€‚åˆ</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>æä¼˜ï¼ˆ312x fasterï¼‰</td>
<td>è¶³å¤Ÿå¥½</td>
</tr>
<tr>
<td><strong>ä¿®æ”¹æ ¸å¿ƒä»£ç </strong></td>
<td>1 è¡Œ</td>
<td>0 è¡Œ</td>
</tr>
<tr>
<td><strong>å¼€å‘å‘¨æœŸ</strong></td>
<td>2-4 å°æ—¶</td>
<td>4-8 å°æ—¶</td>
</tr>
</tbody></table>
<h3 id="ä¸ªäººçš„å®æˆ˜é€‰æ‹©"><a href="#ä¸ªäººçš„å®æˆ˜é€‰æ‹©" class="headerlink" title="ä¸ªäººçš„å®æˆ˜é€‰æ‹©"></a>ä¸ªäººçš„å®æˆ˜é€‰æ‹©</h3><p>å¦ç™½è¯´ï¼Œæˆ‘æœ€åˆå°è¯•è¿‡ pluginlibï¼Œä½†å‘ç°å¯¹äºé¢‘ç¹è¿­ä»£çš„ç ”å‘é˜¶æ®µï¼Œå®ƒçš„ XML é…ç½®ã€plugin.xml æ–‡ä»¶ã€CMakeLists.txt ä¿®æ”¹å’Œç¼–è¯‘è¿‡ç¨‹åè€Œæ‹–æ…¢äº†å¼€å‘é€Ÿåº¦ã€‚</p>
<p>æˆ‘éœ€è¦çš„æ˜¯å¿«é€Ÿè¿­ä»£ã€å°‘å†²çªã€é«˜æ€§èƒ½çš„æ–¹æ¡ˆã€‚æ‰€ä»¥åœ¨å½“å‰é¡¹ç›®ä¸­é€‰æ‹©äº†è½»é‡çº§çš„å·¥å‚ Lambda æ–¹æ¡ˆã€‚</p>
<p><strong>å…³é”®æ˜¯</strong>ï¼šä¸€æ—¦ç³»ç»Ÿæˆç†Ÿã€æ§åˆ¶å™¨ç¨³å®šï¼Œæˆ‘ä¾ç„¶å¯ä»¥å¹³æ»‘è¿ç§»åˆ° pluginlibâ€”â€”ä¸¤è€…çš„åº•å±‚è®¾è®¡æ€æƒ³æ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯å®ç°æ–¹å¼ä¸åŒã€‚</p>
<h3 id="ä½•æ—¶é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆ"><a href="#ä½•æ—¶é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆ" class="headerlink" title="ä½•æ—¶é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆ"></a>ä½•æ—¶é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆ</h3><p><strong>é€‰æ‹©å½“å‰æ–¹æ¡ˆï¼ˆæ¨èï¼‰å¦‚æœ</strong>ï¼š</p>
<ul>
<li>æ§åˆ¶å™¨æ•°é‡ &lt; 50 ä¸ª</li>
<li>æ§åˆ¶å™¨ç”±åŒä¸€ä¸ªå›¢é˜Ÿç»´æŠ¤</li>
<li>ç³»ç»Ÿæ€§èƒ½è¦æ±‚é«˜</li>
<li>ä¸éœ€è¦è¿è¡Œæ—¶çƒ­åŠ è½½æ–°æ’ä»¶</li>
</ul>
<p><strong>é€‰æ‹© pluginlibï¼ˆæ¨èï¼‰å¦‚æœ</strong>ï¼š</p>
<ul>
<li>æ§åˆ¶å™¨æ•°é‡ &gt; 50 ä¸ª</li>
<li>ç”±å¤šä¸ªç‹¬ç«‹å›¢é˜Ÿè´¡çŒ®æ§åˆ¶å™¨</li>
<li>éœ€è¦æ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶</li>
<li>éœ€è¦è¿è¡Œæ—¶æ›´æ–°&#x2F;æ›¿æ¢æ§åˆ¶å™¨</li>
</ul>
<hr>
<h2 id="ç¬¬äº”éƒ¨åˆ†-ä¸ªäººåæ€"><a href="#ç¬¬äº”éƒ¨åˆ†-ä¸ªäººåæ€" class="headerlink" title="ç¬¬äº”éƒ¨åˆ† - ä¸ªäººåæ€"></a>ç¬¬äº”éƒ¨åˆ† - ä¸ªäººåæ€</h2><h3 id="5-1-è„æ¶æ„è®©æˆ‘åƒè¿‡çš„è‹¦"><a href="#5-1-è„æ¶æ„è®©æˆ‘åƒè¿‡çš„è‹¦" class="headerlink" title="5.1 è„æ¶æ„è®©æˆ‘åƒè¿‡çš„è‹¦"></a>5.1 è„æ¶æ„è®©æˆ‘åƒè¿‡çš„è‹¦</h3><p><strong>æƒ…æ™¯ 1</strong>ï¼šæ·»åŠ ç¬¬ 10 ä¸ªæ§åˆ¶å™¨</p>
<ul>
<li>ä¿®æ”¹æ ¸å¿ƒæ–‡ä»¶ 6-8 å¤„</li>
<li>æ·»åŠ  200-300 è¡Œä»£ç </li>
<li>èŠ±è´¹ 1-3 å¤©æ—¶é—´</li>
<li>æ‹…å¿ƒæ‰“ç ´å…¶ä»–æ§åˆ¶å™¨</li>
</ul>
<p><strong>æƒ…æ™¯ 2</strong>ï¼šä¸¤ä¸ªäººå¹¶è¡Œå¼€å‘</p>
<ul>
<li>é¢‘ç¹çš„ merge å†²çª</li>
<li>è§£å†³å†²çªéœ€è¦ 2+ å°æ—¶</li>
<li>å†²çªæœ¬ä¸åº”è¯¥å‘ç”Ÿ</li>
</ul>
<p><strong>æƒ…æ™¯ 3</strong>ï¼šè°ƒè¯• bug</p>
<ul>
<li>ä¸€ä¸ªå…³äºçº¿ç¨‹çš„ bug</li>
<li>æ•´ä¸ªæ–‡ä»¶ 700+ è¡Œ</li>
<li>èŠ±äº† 4 å°æ—¶æ‰æ‰¾åˆ°æ ¹æº</li>
</ul>
<p><strong>æƒ…æ™¯ 4</strong>ï¼šæ— æ³•ç¼–å†™å•å…ƒæµ‹è¯•</p>
<ul>
<li>CartesianVelocityController ç´§å¯†è€¦åˆ</li>
<li>æ— æ³•éš”ç¦»å•ç‹¬æµ‹è¯•</li>
<li>æµ‹è¯• CartesianVelocityController å°±æ„å‘³ç€è¦å¯åŠ¨æ•´ä¸ª StateMachine</li>
</ul>
<h3 id="5-2-æ¸…æ´è®¾è®¡çš„è½¬æŠ˜ç‚¹"><a href="#5-2-æ¸…æ´è®¾è®¡çš„è½¬æŠ˜ç‚¹" class="headerlink" title="5.2 æ¸…æ´è®¾è®¡çš„è½¬æŠ˜ç‚¹"></a>5.2 æ¸…æ´è®¾è®¡çš„è½¬æŠ˜ç‚¹</h3><p>å½“æ§åˆ¶å™¨æ•°é‡å¢é•¿åˆ° 7-8 ä¸ªæ—¶ï¼Œæˆ‘æ„è¯†åˆ°è¿™ç§æ¶æ„å·²ç»å¿«åˆ°ä¸´ç•Œç‚¹ã€‚</p>
<p><strong>æ¶æ„æ¼”åŒ–çš„åˆ†ç•Œçº¿</strong>ï¼šé€šå¸¸ï¼Œå½“ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€å‡ºç°æ—¶ï¼Œå°±æ˜¯æ¶æ„å¿…é¡»é‡æ„çš„ä¿¡å·ï¼š</p>
<ol>
<li><strong>åŠŸèƒ½æ•°è¶…è¿‡ 5-7 ä¸ª</strong>ï¼Œä¸”æ ¸å¿ƒæ–‡ä»¶å˜å¾—éš¾ä»¥ç»´æŠ¤ï¼ˆ800+ è¡Œï¼‰</li>
<li><strong>å‡ºç°ç¬¬ä¸€æ¬¡ã€ŒåŠ åŠŸèƒ½æ¯”ä¿® bug è¿˜éš¾ã€çš„æ—¶åˆ»</strong>â€”â€”æ¯ä¸ªæ–°åŠŸèƒ½éƒ½è¦è§¦åŠå¤šä¸ªåœ°æ–¹ï¼Œé£é™©æ— æ³•æ§åˆ¶</li>
</ol>
<p>å¯¹æˆ‘æ¥è¯´ï¼Œä¸¤ä¸ªæ¡ä»¶éƒ½å‡ºç°äº†ã€‚æ–°å¢ä¸€ä¸ªæ§åˆ¶å™¨éœ€è¦æ”¹ 6-8 å¤„åœ°æ–¹ï¼Œå˜æˆäº†ã€Œé«˜é£é™©çš„é‡ä½“åŠ›æ´»ã€ã€‚</p>
<p><strong>æˆ‘çš„å†³å®š</strong>ï¼šé‡æ–°è®¾è®¡ï¼ŒåŸºäºä»¥ä¸‹åŸåˆ™ï¼š</p>
<ol>
<li><strong>æ¯ä¸ªæ§åˆ¶å™¨åº”è¯¥ç‹¬ç«‹</strong></li>
<li><strong>é…ç½®ä¸åº”è¯¥åœ¨ä»£ç ä¸­</strong></li>
<li><strong>æ·»åŠ æ–°åŠŸèƒ½ä¸åº”è¯¥ä¿®æ”¹æ ¸å¿ƒä»£ç </strong></li>
<li><strong>åº”è¯¥å¯ä»¥ç‹¬ç«‹æµ‹è¯•</strong></li>
</ol>
<h3 id="5-3-è¿ç§»çš„æ”¶ç›Š"><a href="#5-3-è¿ç§»çš„æ”¶ç›Š" class="headerlink" title="5.3 è¿ç§»çš„æ”¶ç›Š"></a>5.3 è¿ç§»çš„æ”¶ç›Š</h3><p>è¿ç§»åˆ°æ¸…æ´è®¾è®¡åï¼Œ3 å‘¨å†…æˆ‘æ·»åŠ äº† 8 ä¸ªæ–°æ§åˆ¶å™¨ã€‚</p>
<p><strong>å…³é”®æ•°æ®</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªæ–°æ§åˆ¶å™¨çš„å¼€å‘æ—¶é—´ï¼šä» 1-3 å¤© â†’ 2-4 å°æ—¶</li>
<li>æ ¸å¿ƒæ–‡ä»¶è¡Œæ•°ï¼šä¿æŒç¨³å®šï¼ˆ300 è¡Œ â†’ 310 è¡Œï¼‰</li>
<li>Merge å†²çªï¼šä»é¢‘ç¹ â†’ åŸºæœ¬ä¸å‡ºç°</li>
<li>å•å…ƒæµ‹è¯•ï¼šä»ä¸å¯èƒ½ â†’ è½»è€Œæ˜“ä¸¾</li>
</ul>
<h3 id="5-4-å…³é”®é¢†æ‚Ÿ"><a href="#5-4-å…³é”®é¢†æ‚Ÿ" class="headerlink" title="5.4 å…³é”®é¢†æ‚Ÿ"></a>5.4 å…³é”®é¢†æ‚Ÿ</h3><p><strong>ã€Œå½“ä»£ç çš„å¢é•¿å‘ˆæŒ‡æ•°çº§å¢åŠ æ—¶ï¼Œæ˜¯æ¶æ„å‡ºé—®é¢˜äº†ï¼Œè€Œä¸æ˜¯å®ç°å‡ºé—®é¢˜ã€‚ã€</strong></p>
<p>è„æ¶æ„çš„æ ¹æœ¬é—®é¢˜ä¸åœ¨äºæŸä¸ªæ§åˆ¶å™¨çš„å®ç°ä¸å¥½ï¼Œè€Œåœ¨äºç®¡ç†è¿™äº›æ§åˆ¶å™¨çš„æ–¹å¼æœ¬èº«å°±æ˜¯è„†å¼±çš„ã€‚</p>
<p><strong>ä¸€ä¸ªéšå–»</strong>ï¼šå½“æˆ‘åˆ æ‰é‚£ 500 è¡Œ switch-case æ—¶ï¼Œæˆ‘æ„è¯†åˆ°â€”â€”å¥½çš„æ¶æ„ä¸åªæ˜¯ä»£ç æ•´æ´ï¼Œè€Œæ˜¯<strong>å¼€å‘è€…èƒ½å‘¼å¸çš„ç©ºé—´</strong>ã€‚</p>
<p>åœ¨è„æ¶æ„ä¸‹ï¼Œæˆ‘æ€»æ˜¯æˆ˜æˆ˜å…¢å…¢åœ°ä¿®æ”¹ä»£ç ï¼Œæ‹…å¿ƒæ‰“ç ´æŸå¤„çš„å¾®å¦™å¹³è¡¡ã€‚åœ¨æ¸…æ´æ¶æ„ä¸‹ï¼Œæˆ‘å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘æœ¬èº«ï¼Œä¿¡ä»»ç³»ç»Ÿçš„è¾¹ç•Œå’Œçº¦æŸã€‚</p>
<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h3 id="ä»è„åˆ°æ¸…æ´çš„å…³é”®æ´å¯Ÿ"><a href="#ä»è„åˆ°æ¸…æ´çš„å…³é”®æ´å¯Ÿ" class="headerlink" title="ä»è„åˆ°æ¸…æ´çš„å…³é”®æ´å¯Ÿ"></a>ä»è„åˆ°æ¸…æ´çš„å…³é”®æ´å¯Ÿ</h3><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>è„æ¶æ„çš„åšæ³•</th>
<th>æ¸…æ´è®¾è®¡çš„åšæ³•</th>
<th>æ”¶ç›Š</th>
</tr>
</thead>
<tbody><tr>
<td>å¦‚ä½•å®šä¹‰æ–°æ¨¡å¼ï¼Ÿ</td>
<td>ä¿®æ”¹æšä¸¾</td>
<td>YAML é…ç½®</td>
<td>æ— éœ€æ”¹ä»£ç </td>
</tr>
<tr>
<td>å¦‚ä½•åˆå§‹åŒ–æ§åˆ¶å™¨ï¼Ÿ</td>
<td>ç¡¬ç¼–ç  switch-case</td>
<td>å·¥å‚ Lambda</td>
<td>è‡ªåŠ¨åŒ–ã€å¯æ‰©å±•</td>
</tr>
<tr>
<td>å¦‚ä½•å¤„ç†ä¸åŒæ¶ˆæ¯ç±»å‹ï¼Ÿ</td>
<td>void* è½¬å‹ï¼ˆå±é™©ï¼‰</td>
<td>std::any + æ¨¡æ¿ï¼ˆå®‰å…¨ï¼‰</td>
<td>ç¼–è¯‘æœŸæ£€æŸ¥</td>
</tr>
<tr>
<td>å¦‚ä½•ä½¿ç”¨æ–°æ§åˆ¶å™¨ï¼Ÿ</td>
<td>ä¿®æ”¹ 3+ å¤„åœ°æ–¹</td>
<td>ä»…ä¿®æ”¹ registry.cpp + YAML</td>
<td>é™ä½é”™è¯¯é£é™©</td>
</tr>
<tr>
<td>å¯ä»¥æ”¯æŒå¤šå°‘ä¸ªæ§åˆ¶å™¨ï¼Ÿ</td>
<td>&lt; 10ï¼ˆå¼€å§‹æ··ä¹±ï¼‰</td>
<td>50+ ï¼ˆä»ç„¶æ¸…æ™°ï¼‰</td>
<td>å¯æ‰©å±•æ€§</td>
</tr>
</tbody></table>
<h3 id="è®¾è®¡åŸåˆ™æ€»ç»“"><a href="#è®¾è®¡åŸåˆ™æ€»ç»“" class="headerlink" title="è®¾è®¡åŸåˆ™æ€»ç»“"></a>è®¾è®¡åŸåˆ™æ€»ç»“</h3><ol>
<li><strong>é…ç½®é©±åŠ¨</strong>ï¼šç”¨æ•°æ®ï¼ˆYAMLï¼‰è¡¨è¾¾ç»“æ„ï¼Œè€Œéç¡¬ç¼–ç </li>
<li><strong>å·¥å‚æ¨¡å¼</strong>ï¼šå»¶è¿Ÿå¯¹è±¡åˆ›å»ºï¼Œè§£è€¦ä¾èµ–</li>
<li><strong>å•ä¾‹æ³¨å†Œè¡¨</strong>ï¼šå…¨å±€å”¯ä¸€çš„â€é»„é¡µâ€</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šç¼–è¯‘æœŸé”™è¯¯ &gt; è¿è¡ŒæœŸé”™è¯¯</li>
<li><strong>æ¾è€¦åˆ</strong>ï¼šæ–°æ§åˆ¶å™¨æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç </li>
</ol>
<h3 id="æœ€åçš„è¯"><a href="#æœ€åçš„è¯" class="headerlink" title="æœ€åçš„è¯"></a>æœ€åçš„è¯</h3><p>è¿™å¥—è®¾è®¡æ–¹æ¡ˆæ˜¯åœ¨<strong>æ€§èƒ½ã€æ˜“ç”¨æ€§ã€å¯æ‰©å±•æ€§</strong>ä¹‹é—´çš„ç²¾å¿ƒæƒè¡¡ï¼š</p>
<ul>
<li>å¦‚æœä½ éœ€è¦æè‡´æ€§èƒ½ â†’ å½“å‰æ–¹æ¡ˆæ›´ä¼˜</li>
<li>å¦‚æœä½ éœ€è¦æè‡´çµæ´»æ€§ â†’ pluginlib æ›´ä¼˜</li>
<li>å¦‚æœä½ éœ€è¦å¹³è¡¡ â†’ å½“å‰æ–¹æ¡ˆè¶³ä»¥åº”å¯¹æœªæ¥ 3-5 å¹´çš„å¢é•¿</li>
</ul>
<p><strong>å…³é”®æ˜¯</strong>ï¼šç†è§£è¿™ä¸¤ç§è®¾è®¡çš„å“²å­¦ï¼Œæ ¹æ®ä½ çš„å®é™…éœ€æ±‚åšå‡ºé€‰æ‹©ã€‚</p>
<p>æ¶æ„è®¾è®¡çš„è‰ºæœ¯ï¼Œå°±åœ¨äºæ­¤ã€‚</p>
<hr>
<h2 id="ä¸Šç¯‡å›é¡¾"><a href="#ä¸Šç¯‡å›é¡¾" class="headerlink" title="ä¸Šç¯‡å›é¡¾"></a>ä¸Šç¯‡å›é¡¾</h2><p>æƒ³å›é¡¾é—®é¢˜è¯Šæ–­ï¼Ÿ <a href="/2025/11/01/%E4%BB%8E%E7%A1%AC%E7%BC%96%E7%A0%81%E5%88%B0%E6%8F%92%E4%BB%B6%E5%8C%96%EF%BC%88%E4%B8%8A%E7%AF%87%EF%BC%89%EF%BC%9A%E8%84%8F%E6%9E%B6%E6%9E%84%E7%9A%84%E9%97%AE%E9%A2%98%E8%AF%8A%E6%96%AD/">æŸ¥çœ‹ä¸Šç¯‡ï¼šè„æ¶æ„çš„é—®é¢˜è¯Šæ–­</a></p>

    </div>

    
    
    

    <footer class="post-footer"><div class="post-widgets">
      <div id="needsharebutton-postbottom">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    </div>
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Ding Kaiyue
  </li>
  <li class="post-copyright-link">
      <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
      <a href="http://ding-kaiyue.github.io/2025/11/01/%E4%BB%8E%E7%A1%AC%E7%BC%96%E7%A0%81%E5%88%B0%E6%8F%92%E4%BB%B6%E5%8C%96%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89%EF%BC%9A%E6%B8%85%E6%B4%81%E6%9E%B6%E6%9E%84%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/" title="ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸‹ç¯‡ï¼‰ï¼šæ¸…æ´æ¶æ„çš„è®¾è®¡ä¸å®ç°">http://ding-kaiyue.github.io/2025/11/01/ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸‹ç¯‡ï¼‰ï¼šæ¸…æ´æ¶æ„çš„è®¾è®¡ä¸å®ç°/</a>
  </li>
  <li class="post-copyright-license">
      <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ BY-NC-SA è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>

          <div class="followme">
  <span>è”ç³»æ–¹å¼</span>

  <div class="social-list">

      <div class="social-item">
          <span class="social-link">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </span>

          <img class="social-item-img" src="/images/wechat_channel.jpg">
      </div>

      <div class="social-item">
          <span class="social-link">
            <span class="icon">
              <i class="fab fa-qq"></i>
            </span>

            <span class="label">QQ</span>
          </span>

          <img class="social-item-img" src="/images/qq_channel.jpg">
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C++</a>
              <a href="/tags/ROS2/" rel="tag"><i class="fa fa-tag"></i> ROS2</a>
              <a href="/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" rel="tag"><i class="fa fa-tag"></i> æ¶æ„è®¾è®¡</a>
              <a href="/tags/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" rel="tag"><i class="fa fa-tag"></i> å·¥å‚æ¨¡å¼</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/11/01/%E4%BB%8E%E7%A1%AC%E7%BC%96%E7%A0%81%E5%88%B0%E6%8F%92%E4%BB%B6%E5%8C%96%EF%BC%88%E4%B8%8A%E7%AF%87%EF%BC%89%EF%BC%9A%E8%84%8F%E6%9E%B6%E6%9E%84%E7%9A%84%E9%97%AE%E9%A2%98%E8%AF%8A%E6%96%AD/" rel="prev" title="ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸Šç¯‡ï¼‰ï¼šè„æ¶æ„çš„é—®é¢˜è¯Šæ–­">
                  <i class="fa fa-angle-left"></i> ä»ç¡¬ç¼–ç åˆ°æ’ä»¶åŒ–ï¼ˆä¸Šç¯‡ï¼‰ï¼šè„æ¶æ„çš„é—®é¢˜è¯Šæ–­
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/11/06/%E6%8E%A7%E5%88%B6%E5%99%A8%E4%BD%93%E7%B3%BB%E7%9A%84%E6%BC%94%E8%BF%9B%EF%BC%88%E4%B8%8A%E7%AF%87%EF%BC%89%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%88%86%E5%B1%82%E7%BB%A7%E6%89%BF/" rel="next" title="æ§åˆ¶å™¨ä½“ç³»çš„æ¼”è¿›ï¼ˆä¸Šç¯‡ï¼‰ï¼šä¸ºä»€ä¹ˆéœ€è¦åˆ†å±‚ç»§æ‰¿">
                  æ§åˆ¶å™¨ä½“ç³»çš„æ¼”è¿›ï¼ˆä¸Šç¯‡ï¼‰ï¼šä¸ºä»€ä¹ˆéœ€è¦åˆ†å±‚ç»§æ‰¿ <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ding Kaiyue</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/Ding-Kaiyue" class="github-corner" title="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘" aria-label="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<div id="needsharebutton-float">
      <span class="btn">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </span>
    </div>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script>
  <script>
      pbOptions = {};
        pbOptions.iconStyle = "default";
        pbOptions.boxForm = "horizontal";
        pbOptions.position = "bottomCenter";
        pbOptions.networks = "Weibo,Wechat,QQZone,Twitter,Facebook";
      new needShareButton('#needsharebutton-postbottom', pbOptions);
      flOptions = {};
        flOptions.iconStyle = "box";
        flOptions.boxForm = "horizontal";
        flOptions.position = "middleRight";
        flOptions.networks = "Weibo,Wechat,QQZone,Twitter,Facebook";
      new needShareButton('#needsharebutton-float', flOptions);
  </script><script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"Ding-Kaiyue/Ding-Kaiyue.github.io","issue_term":"pathname","label":"Comment","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js" defer></script>

    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas>
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script type="text/javascript" src="/js/fireworks.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":200,"height":450,"hOffset":10,"vOffset":150},"mobile":{"show":false},"log":false});</script></body>
</html>
